<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®¶äº‹æŒ‘æˆ°è³½</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        body { background-color: #2D3436; font-family: 'Press Start 2P', cursive, "Microsoft JhengHei"; color: white; margin: 0; padding: 15px; user-select: none; }
        .container { max-width: 500px; margin: auto; }
        h1 { text-align: center; color: #FAB1A0; font-size: 16px; margin-bottom: 20px; text-shadow: 2px 2px #000; }
        
        /* ç©åˆ†çœ‹æ¿ */
        .scoreboard { background: #353b48; border: 4px solid #DFE6E9; padding: 15px; display: flex; justify-content: space-around; margin-bottom: 20px; box-shadow: 6px 6px 0px #000; }
        .score-box { text-align: center; flex: 1; }
        .score-box p { font-size: 10px; margin: 0 0 10px 0; color: #ADEDD5; height: 12px; }
        .score-val { font-size: 24px; color: #FFEAA7; text-shadow: 2px 2px #000; }
        .crown { color: #f9d423; font-size: 10px; margin-left: 2px; }

        /* å®¶äº‹æ¸…å–® */
        .task-list { display: grid; grid-template-columns: 1fr; gap: 12px; }
        .task-item { background: #0984E3; border: 4px solid #74B9FF; padding: 12px; display: flex; justify-content: space-between; align-items: center; box-shadow: 4px 4px 0px #000; }
        .task-info { display: flex; flex-direction: column; }
        .task-name { font-size: 14px; margin-bottom: 5px; letter-spacing: 1px; }
        .task-points { font-size: 9px; color: #FFEAA7; font-weight: bold; }
        
        .btn-group { display: flex; gap: 8px; }
        .btn-add { 
            background: #55EFC4; border: none; color: #2D3436; padding: 12px 8px; 
            font-family: 'Press Start 2P'; cursor: pointer; font-size: 9px; 
            box-shadow: 2px 2px 0px #000; border-radius: 4px;
        }
        .btn-add:active { transform: translate(2px, 2px); box-shadow: none; }
        .btn-s { background: #81ECEC; }

        /* ç´€éŒ„å€ */
        .logs { 
            margin-top: 25px; background: rgba(0,0,0,0.4); padding: 12px; 
            border: 2px solid #636E72; height: 120px; overflow-y: auto; font-size: 9px; 
        }
        .log-item { border-bottom: 1px solid #444; padding: 6px 0; color: #B2BEC3; line-height: 1.4; }
        
        .footer-btns { margin-top: 20px; display: flex; gap: 10px; }
        .btn-reset { 
            background: #FF7675; border: none; color: white; padding: 12px; 
            width: 100%; font-family: 'Press Start 2P'; font-size: 10px; 
            box-shadow: 4px 4px 0px #000;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ  YAWEN & SHUOYUAN</h1>

    <div class="scoreboard">
        <div class="score-box">
            <p id="name-y">é›…çŸ <span id="crown-y"></span></p>
            <div id="y-score" class="score-val">0</div>
        </div>
        <div class="score-box" style="font-size: 18px; align-self: center; color:#aaa;">VS</div>
        <div class="score-box">
            <p id="name-s">ç¢©å…ƒ <span id="crown-s"></span></p>
            <div id="s-score" class="score-val">0</div>
        </div>
    </div>

    <div class="task-list" id="task-container"></div>

    <div class="logs" id="log-container"></div>

    <div class="footer-btns">
        <button class="btn-reset" onclick="resetAll()">RESET WEEKLY</button>
    </div>
</div>

<script>
    const tasks = [
        { name: "æ‰“æƒæµ´å®¤", pts: 50, icon: "ğŸš¿" },
        { name: "æ‰“æƒå»šæˆ¿", pts: 40, icon: "ğŸ³" },
        { name: "æ‹–åœ°", pts: 20, icon: "ğŸª£" },
        { name: "æ´—è¡£æœ", pts: 15, icon: "ğŸ§º" },
        { name: "æ´—ç¢—", pts: 10, icon: "ğŸ¥£" },
        { name: "æƒåœ°", pts: 10, icon: "ğŸ§¹" },
        { name: "å€’åƒåœ¾", pts: 5, icon: "ğŸ—‘ï¸" },
        { name: "æ“¦æ¡Œå­", pts: 5, icon: "ğŸ§½" }
    ];

    let db = JSON.parse(localStorage.getItem('HOME_BATTLE_V1')) || { y: 0, s: 0, logs: [] };

    function init() {
        const container = document.getElementById('task-container');
        tasks.forEach(task => {
            container.innerHTML += `
                <div class="task-item">
                    <div class="task-info">
                        <span class="task-name">${task.icon} ${task.name}</span>
                        <span class="task-points">+${task.pts} PTS</span>
                    </div>
                    <div class="btn-group">
                        <button class="btn-add" onclick="addScore('y', '${task.name}', ${task.pts})">é›…çŸ</button>
                        <button class="btn-add btn-s" onclick="addScore('s', '${task.name}', ${task.pts})">ç¢©å…ƒ</button>
                    </div>
                </div>
            `;
        });
        if(db.logs.length === 0) db.logs.push("Battle Start! åšå®¶äº‹æ‹¿ç©åˆ†ï¼");
        updateDisplay();
    }

    function addScore(user, taskName, pts) {
        db[user] += pts;
        const name = user === 'y' ? 'é›…çŸ' : 'ç¢©å…ƒ';
        const now = new Date();
        const time = now.getHours().toString().padStart(2, '0') + ":" + now.getMinutes().toString().padStart(2, '0');
        db.logs.unshift(`[${time}] ${name} å®Œæˆäº† ${taskName} (+${pts})`);
        if (db.logs.length > 30) db.logs.pop();
        save();
        updateDisplay();
    }

    function updateDisplay() {
        document.getElementById('y-score').innerText = db.y;
        document.getElementById('s-score').innerText = db.s;
        
        // çš‡å† é‚è¼¯
        const cy = document.getElementById('crown-y');
        const cs = document.getElementById('crown-s');
        cy.innerText = (db.y > db.s && db.y > 0) ? "ğŸ‘‘" : "";
        cs.innerText = (db.s > db.y && db.s > 0) ? "ğŸ‘‘" : "";

        const logBox = document.getElementById('log-container');
        logBox.innerHTML = db.logs.map(l => `<div class="log-item">${l}</div>`).join('');
    }

    function save() {
        localStorage.setItem('HOME_BATTLE_V1', JSON.stringify(db));
    }

    function resetAll() {
        if(confirm("ç¢ºå®šè¦é‡ç½®æœ¬é€±åˆ†æ•¸å—ï¼Ÿ")) {
            db = { y: 0, s: 0, logs: ["æ–°çš„ä¸€é€±é–‹å§‹äº†ï¼åŠ æ²¹ï¼"] };
            save();
            updateDisplay();
        }
    }

    init();
</script>

</body>
</html>
